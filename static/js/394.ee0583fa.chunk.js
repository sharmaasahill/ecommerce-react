"use strict";(self.webpackChunkPahnawa=self.webpackChunkPahnawa||[]).push([[394],{2630:function(e,n,s){s.d(n,{Z:function(){return d}});var a=s(9439),t=s(2791),r=s.p+"static/media/beep.6600864a65bf2d52b177.mp3",i=s(184),d=function(e){var n=e.color,s=e.message,d=(0,t.useState)(!0),c=(0,a.Z)(d,2),l=c[0],o=c[1];return(0,t.useEffect)((function(){setTimeout((function(){o(!1)}),5e3)}),[]),l?(0,i.jsxs)("div",{className:"toast ".concat(n," show"),children:[(0,i.jsx)("audio",{src:r,controls:!0,autoPlay:!0,style:{display:"none"}}),(0,i.jsxs)("div",{className:"toast-content",children:[(0,i.jsx)("div",{className:"toast-message",children:s}),(0,i.jsx)("div",{className:"progress",children:(0,i.jsx)("div",{className:"progress-value"})})]})]}):null}},440:function(e,n,s){s.d(n,{Z:function(){return d}});var a=s(1413),t=s(4925),r=s(184),i=["label"],d=function(e){var n=e.label,s=(0,t.Z)(e,i);return(0,r.jsxs)("div",{className:"group",children:[(0,r.jsx)("input",(0,a.Z)({className:"form-input"},s)),(0,r.jsx)("label",{className:"".concat(s.value.length?"shrink":""," form-input-label"),children:n})]})}},4833:function(e,n,s){s.r(n),s.d(n,{default:function(){return E}});var a,t,r,i=s(4165),d=s(5861),c=s(9439),l=s(5764),o=s(168),u=s(2683),m=u.ZP.div(a||(a=(0,o.Z)(["\n  margin: 0px auto 50px auto;\n  width: 40%;\n  display: flex;\n  flex-direction: column;\n\n  @media (max-width: 768px) {\n    margin: 0px auto 50px auto;\n    width: 80%;\n  }\n"]))),p=u.ZP.form(t||(t=(0,o.Z)(["\n  min-width: 200px;\n  button {\n    margin-top: 30px;\n    margin-left: auto;\n  }\n  span {\n    color: red;\n    display: block;\n    margin-top: 15px;\n  }\n  @media (max-width: 768px) {\n    min-width: 90%;\n\n    button {\n      margin-top: 30px;\n      width: 100%;\n    }\n  }\n"]))),h=(0,u.ZP)(l.CardElement)(r||(r=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  border: 1px solid #ccc;\n  height: 30px;\n  padding: 10px;\n"]))),x=s(9859),f=s(5012),j=s(2791),g=s(1876),v=s(2630),y=s(4942),Z=s(1413),b=s(3855),N=s(9687),C=s(440),w=s(184),P={firstName:"",lastName:"",phone:"",address:""},k=function(){var e=(0,j.useState)(P),n=(0,c.Z)(e,2),s=n[0],a=n[1],t=s.firstName,r=s.lastName,l=s.phone,o=s.address,u=(0,b.v9)(g.T),m=(0,j.useState)(!1),p=(0,c.Z)(m,2),h=p[0],v=p[1],k=(0,b.I0)(),S=function(e){var n=e.target,t=n.name,r=n.value;a((0,Z.Z)((0,Z.Z)({},s),{},(0,y.Z)({},t,r)))},T=function(){var e=(0,d.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),k((0,N.V)((0,Z.Z)({},s))),v(!0);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),A=(0,j.useContext)(f.A).cartTotal;return(0,w.jsxs)("div",{className:"address-form-container",children:[(0,w.jsxs)("div",{className:"checkout-summary",children:[(0,w.jsx)("h5",{className:"summary-heading",children:"Summary"}),(0,w.jsxs)("ul",{className:"list-group",children:[(0,w.jsxs)("li",{className:"list-group-item",children:["Products",(0,w.jsxs)("span",{children:["\u20b9",A]})]}),(0,w.jsxs)("li",{className:"list-group-item",children:["Shipping",(0,w.jsxs)("span",{children:["\u20b9",A?150:0]})]}),(0,w.jsxs)("li",{className:"list-group-item",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("strong",{children:"Total amount"}),(0,w.jsx)("p",{children:"(including GST)"})]}),(0,w.jsx)("span",{children:(0,w.jsxs)("strong",{children:["\u20b9",A+(A?150:0)]})})]})]})]}),(0,w.jsxs)("div",{className:"address-form",children:[(0,w.jsx)("h5",{className:"billing-heading",children:"Shipping Address"}),(0,w.jsx)("div",{className:"mb-4",children:h?(0,w.jsxs)("div",{className:"currentAddressContainer",children:[(0,w.jsx)("h3",{children:"Current Address"}),(0,w.jsx)("div",{className:"currentAddress",children:u?"".concat(u.firstName," ").concat(u.lastName,",  ").concat(u.address,", Contact: ").concat(u.phone):"No address added"}),(0,w.jsx)(x.Z,{onClick:function(){v(!1),k((0,N.V)((0,Z.Z)({},P)))},children:"Edit Address"})]}):(0,w.jsxs)("form",{onSubmit:T,children:[(0,w.jsx)(C.Z,{label:"First name",type:"text",name:"firstName",value:t,onChange:S,required:!0}),(0,w.jsx)(C.Z,{label:"Last name",name:"lastName",type:"text",value:r,onChange:S,required:!0}),(0,w.jsx)(C.Z,{label:"Address",name:"address",type:"address",value:o,onChange:S,required:!0}),(0,w.jsx)(C.Z,{label:"Mobile Number",name:"phone",type:"phone",value:l,onChange:S,required:!0}),(0,w.jsx)(x.Z,{children:"Add Address"})]})})]})]})},S=s(6641),T=function(){return(0,w.jsxs)("div",{className:"lds-ring",children:[(0,w.jsx)("div",{}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{})]})},A=s(7689),E=function(){var e=(0,A.s0)(),n=(0,l.useStripe)(),s=(0,l.useElements)(),a=(0,j.useContext)(f.A),t=a.cartTotal,r=a.updateCartItemsReducer,o=a.cartItems,u=(0,j.useContext)(S.y).addTransactionToOrders,y=(0,b.v9)(g.H),Z=(0,b.v9)(g.T),N=(0,j.useState)(!1),C=(0,c.Z)(N,2),P=C[0],E=C[1],I=(0,j.useState)(null),D=(0,c.Z)(I,2),q=D[0],V=D[1],F=(0,j.useState)(!1),O=(0,c.Z)(F,2),_=O[0],R=O[1],G=[{color:"red",message:"Cart is Empty. Please add items to cart."},{color:"red",message:"Please Enter Delivery Address."},{color:"red",message:"Payment Failed. Please try again."},{color:"red",message:"Card Details not found. Please enter valid details."},{color:"green",message:"Payment Successful. Thank you for shopping with us. Redirecting to Orders Page..."}],H=function(){setTimeout((function(){E(!1),V(null)}),5e3)},J=function(){var a=(0,d.Z)((0,i.Z)().mark((function a(d){var c,m,p,h,x,f;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(d.preventDefault(),0!==t){a.next=6;break}return E(!0),V(G[0]),H(),a.abrupt("return");case 6:if(Z){a.next=11;break}return E(!0),V(G[1]),H(),a.abrupt("return");case 11:if(R(!0),n&&s){a.next=14;break}return a.abrupt("return");case 14:return a.prev=14,a.next=17,fetch("/.netlify/functions/create-payment-intent",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:100*(t+(t?150:0))})}).then((function(e){return console.log(e),e.json()}));case 17:return c=a.sent,m=s.getElement(l.CardElement),p=c.paymentIntent.client_secret,a.next=22,n.confirmCardPayment(p,{payment_method:{card:m,billing_details:{name:y.displayName,email:y.email}}});case 22:(h=a.sent).error?("Your card number is incomplete."===h.error.message?V(G[3]):V(G[2]),E(!0),H()):"succeeded"===h.paymentIntent.status&&(x=h.paymentIntent.id,f={id:x,items:o,amount:t+(t?150:0),date:"".concat(new Date),address:Z},u(f),E(!0),V(G[4]),setTimeout((function(){e("/orders")}),5e3),H(),r([])),R(!1),a.next=33;break;case 27:a.prev=27,a.t0=a.catch(14),E(!0),V(G[3]),R(!1),H();case 33:case"end":return a.stop()}}),a,null,[[14,27]])})));return function(e){return a.apply(this,arguments)}}();return(0,w.jsxs)(j.Fragment,{children:[(0,w.jsx)(k,{}),(0,w.jsxs)(m,{children:[(0,w.jsxs)(p,{onSubmit:J,children:[(0,w.jsx)("h3",{children:"Credit Card Payment: "}),(0,w.jsx)(h,{}),(0,w.jsx)("span",{children:"**Use Test Card: 4242 4242 4242 4242, Expiry: 04/24, CVV: 242, Pin: 42424**"}),_?(0,w.jsx)(x.Z,{disabled:_,children:(0,w.jsx)(T,{})}):(0,w.jsx)(x.Z,{disabled:_,children:"Pay Now"})]}),P&&(0,w.jsx)(v.Z,{color:q.color,message:q.message})]})]})}}}]);
//# sourceMappingURL=394.ee0583fa.chunk.js.map